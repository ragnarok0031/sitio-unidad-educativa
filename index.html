<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="site-title">Unidad Educativa [Nombre]</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* Estilos adicionales */
        body {
            font-family: 'Inter', sans-serif; /* Fuente Inter */
        }
        /* Estilos para elementos editables */
        [contenteditable="true"] {
            outline: 2px dashed rgba(0, 119, 255, 0.5); /* Borde punteado azul claro al enfocar */
            cursor: text;
            padding: 2px 4px;
            border-radius: 4px;
            transition: outline 0.2s ease-in-out;
        }
        [contenteditable="true"]:hover,
        [contenteditable="true"]:focus {
            outline: 2px solid rgba(0, 119, 255, 0.8); /* Borde sólido azul al pasar el mouse o enfocar */
            background-color: rgba(0, 119, 255, 0.05);
        }
        /* Estilos para los cuadrados interactivos */
        .interactive-square {
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }
        .interactive-square:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }
        /* Botón de edición (opcional, para enlaces/imágenes) */
        .edit-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background-color: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 4px;
            border-radius: 50%;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s ease;
            width: 24px; /* Tamaño fijo para el icono */
            height: 24px; /* Tamaño fijo para el icono */
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10; /* Asegura que esté sobre el contenido */
        }
        .editable-container:hover .edit-btn,
        .editable-image-container:hover .edit-btn { /* Asegurar que se muestre en hover de imagen */
             opacity: 1;
        }
         /* Contenedor para imagen y botón */
        .editable-image-container {
            position: relative; /* Necesario para posicionar el botón */
            display: inline-block; /* O block, según layout */
            max-width: 100%; /* Asegurar que no se desborde */
        }
        /* Estilo para el mensaje de guardado */
        #save-indicator {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(40, 167, 69, 0.9); /* Verde éxito con transparencia */
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            pointer-events: none; /* Para que no interfiera con clicks */
        }
        #save-indicator.show {
            opacity: 1;
        }
        /* Asegurar contraste para accesibilidad */
        .high-contrast-text {
             text-shadow: 1px 1px 2px rgba(0,0,0,0.5); /* Sombra ligera para mejorar contraste sobre imágenes */
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div id="save-indicator">¡Cambios guardados localmente!</div>

    <header class="bg-blue-600 text-white p-4 shadow-md">
        <div class="container mx-auto flex justify-between items-center">
            <h1 id="header-title" class="text-2xl font-bold editable" data-storage-key="headerTitle">
                Unidad Educativa [Nombre Editable]
            </h1>
            <nav aria-label="Navegación principal">
                <ul class="flex space-x-4">
                    <li><a href="index.html" class="hover:text-blue-200 font-semibold text-blue-100" aria-current="page">Inicio</a></li>
                    <li><a href="nosotros.html" class="hover:text-blue-200">Sobre Nosotros</a></li>
                    <li><a href="programas.html" class="hover:text-blue-200">Programas</a></li>
                    <li><a href="contacto.html" class="hover:text-blue-200">Contacto</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container mx-auto p-6">
        <h2 id="main-title" class="text-3xl font-semibold text-center mb-8 editable" data-storage-key="mainTitleIndex">
            Bienvenido a Nuestra Unidad Educativa
        </h2>
        <p id="main-intro" class="text-center mb-12 text-lg text-gray-600 editable" data-storage-key="mainIntroIndex">
            Formando el futuro con excelencia académica y valores. Descubre más sobre nosotros.
        </p>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">

            <div class="relative bg-white rounded-lg shadow-lg overflow-hidden interactive-square editable-container">
                 <button class="edit-btn edit-link-btn" data-target-id="link-inicio" aria-label="Editar enlace de Inicio">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
                </button>
                <a id="link-inicio" href="inicio.html" class="block p-6 h-full flex flex-col justify-center items-center text-center" data-storage-key-link="linkInicioHref">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-home text-blue-500 mb-4"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                    <h3 id="square1-title" class="text-xl font-semibold mb-2 editable" data-storage-key="square1Title">Inicio</h3>
                    <p id="square1-desc" class="text-gray-600 editable" data-storage-key="square1Desc">Página principal y novedades.</p>
                </a>
            </div>

            <div class="relative bg-white rounded-lg shadow-lg overflow-hidden interactive-square editable-container">
                <button class="edit-btn edit-link-btn" data-target-id="link-nosotros" aria-label="Editar enlace de Sobre Nosotros">
                     <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
                </button>
                <a id="link-nosotros" href="nosotros.html" class="block p-6 h-full flex flex-col justify-center items-center text-center" data-storage-key-link="linkNosotrosHref">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users text-green-500 mb-4"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                    <h3 id="square2-title" class="text-xl font-semibold mb-2 editable" data-storage-key="square2Title">Sobre Nosotros</h3>
                    <p id="square2-desc" class="text-gray-600 editable" data-storage-key="square2Desc">Nuestra historia, misión y visión.</p>
                </a>
            </div>

            <div class="relative bg-white rounded-lg shadow-lg overflow-hidden interactive-square editable-container">
                 <button class="edit-btn edit-link-btn" data-target-id="link-programas" aria-label="Editar enlace de Programas Académicos">
                     <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
                </button>
                <a id="link-programas" href="programas.html" class="block p-6 h-full flex flex-col justify-center items-center text-center" data-storage-key-link="linkProgramasHref">
                     <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-graduation-cap text-purple-500 mb-4"><path d="M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.084a1 1 0 0 0 0 1.838l8.57 3.908a2 2 0 0 0 1.66 0l8.59-3.908Z"/><path d="M6 12v5c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2v-5"/><path d="M6 12.25V17a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-4.75"/></svg>
                    <h3 id="square3-title" class="text-xl font-semibold mb-2 editable" data-storage-key="square3Title">Programas Académicos</h3>
                    <p id="square3-desc" class="text-gray-600 editable" data-storage-key="square3Desc">Oferta educativa y planes de estudio.</p>
                </a>
            </div>

            <div class="relative bg-white rounded-lg shadow-lg overflow-hidden interactive-square editable-container">
                 <button class="edit-btn edit-link-btn" data-target-id="link-contacto" aria-label="Editar enlace de Contacto">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
                </button>
                <a id="link-contacto" href="contacto.html" class="block p-6 h-full flex flex-col justify-center items-center text-center" data-storage-key-link="linkContactoHref">
                    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail text-red-500 mb-4"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
                    <h3 id="square4-title" class="text-xl font-semibold mb-2 editable" data-storage-key="square4Title">Contacto</h3>
                    <p id="square4-desc" class="text-gray-600 editable" data-storage-key="square4Desc">Información y formulario de contacto.</p>
                </a>
            </div>

        </div>
    </main>

    <footer class="bg-gray-800 text-white p-6 mt-12">
        <div class="container mx-auto text-center">
            <p id="footer-text" class="editable" data-storage-key="footerText">
                © 2025 Unidad Educativa [Nombre Editable]. Todos los derechos reservados.
            </p>
            <p class="text-sm text-gray-400 mt-2">
                <span id="footer-address" class="editable" data-storage-key="footerAddress">Dirección: Calle Falsa 123, Ciudad</span> |
                <span id="footer-phone" class="editable" data-storage-key="footerPhone">Teléfono: +123 456 7890</span>
            </p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const editableElements = document.querySelectorAll('.editable');
            const editableLinks = document.querySelectorAll('a[data-storage-key-link]');
            const editableImages = document.querySelectorAll('img.editable-image[data-storage-key-img]');
            const saveIndicator = document.getElementById('save-indicator');
            let saveTimeout;

            // Función para mostrar indicador de guardado
            function showSaveIndicator() {
                clearTimeout(saveTimeout);
                saveIndicator.classList.add('show');
                saveTimeout = setTimeout(() => {
                    saveIndicator.classList.remove('show');
                }, 2000); // Ocultar después de 2 segundos
            }

            // Cargar contenido de localStorage para texto
            editableElements.forEach(el => {
                const storageKey = el.dataset.storageKey;
                if (storageKey) {
                    const savedContent = localStorage.getItem(storageKey);
                    if (savedContent) {
                        el.innerHTML = savedContent; // Usar innerHTML para permitir formato básico si es necesario
                    }
                    // Habilitar edición
                    el.contentEditable = true;
                    el.setAttribute('aria-label', `Contenido editable: ${el.textContent.substring(0, 30)}...`); // Etiqueta ARIA básica

                    // Guardar al perder el foco (blur)
                    el.addEventListener('blur', () => {
                        localStorage.setItem(storageKey, el.innerHTML);
                        el.setAttribute('aria-label', `Contenido editable: ${el.textContent.substring(0, 30)}...`); // Actualizar ARIA
                        showSaveIndicator();
                    });

                     // Permitir Enter solo si no es un título o elemento corto (evita saltos de línea no deseados)
                    if (!el.tagName.startsWith('H') && !el.matches('span')) {
                         el.addEventListener('keypress', (e) => {
                            if (e.key === 'Enter') {
                                // Comportamiento por defecto (nuevo párrafo/línea)
                            }
                        });
                    } else {
                         el.addEventListener('keypress', (e) => {
                            if (e.key === 'Enter') {
                                e.preventDefault(); // Prevenir salto de línea en títulos
                                el.blur(); // Guardar al presionar Enter
                            }
                        });
                    }
                }
            });

            // Cargar contenido de localStorage para enlaces (href)
            editableLinks.forEach(link => {
                const storageKey = link.dataset.storageKeyLink;
                if (storageKey) {
                    const savedHref = localStorage.getItem(storageKey);
                    if (savedHref) {
                        link.href = savedHref;
                    }
                }
            });

            // Cargar contenido de localStorage para imágenes (src)
            editableImages.forEach(img => {
                const storageKey = img.dataset.storageKeyImg;
                 if (storageKey) {
                    const savedSrc = localStorage.getItem(storageKey);
                    if (savedSrc) {
                        img.src = savedSrc;
                    }
                     // Añadir fallback simple
                    img.onerror = function() {
                        console.warn(`Error loading image: ${img.src}. Falling back to placeholder.`);
                        // Usar dimensiones intrínsecas o predeterminadas si están disponibles
                        const width = img.naturalWidth > 0 ? img.naturalWidth : (img.width || 300);
                        const height = img.naturalHeight > 0 ? img.naturalHeight : (img.height || 200);
                        img.src = `https://placehold.co/${width}x${height}/cccccc/ffffff?text=Error+al+cargar`;
                    };
                }
            });


            // --- Funcionalidad de Botones de Edición ---

            // Editar Enlaces
            document.querySelectorAll('.edit-link-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault(); // Evitar que el enlace se active
                    e.stopPropagation(); // Detener la propagación al contenedor
                    const targetId = button.dataset.targetId;
                    const linkElement = document.getElementById(targetId);
                    if (linkElement && linkElement.tagName === 'A') {
                        const currentHref = linkElement.getAttribute('href'); // Usar getAttribute para obtener el valor exacto
                        const newHref = prompt(`Editar URL del enlace (actual: ${currentHref}):`, currentHref);
                        if (newHref !== null && newHref.trim() !== '') {
                            linkElement.href = newHref.trim();
                            const storageKey = linkElement.dataset.storageKeyLink;
                            if (storageKey) {
                                localStorage.setItem(storageKey, newHref.trim());
                                showSaveIndicator();
                                console.log(`Link ${targetId} updated to: ${newHref.trim()}`);
                            }
                        } else if (newHref === null) {
                            console.log("Link edit cancelled.");
                        } else {
                            alert("La URL no puede estar vacía.");
                        }
                    } else {
                        console.error(`Target element with ID ${targetId} not found or is not an anchor tag.`);
                    }
                });
            });

             // Editar Imágenes
            document.querySelectorAll('.edit-image-btn').forEach(button => {
                const targetId = button.dataset.targetId;
                const imgElement = document.getElementById(targetId);
                if (imgElement) {
                    // Crear un contenedor si no existe para posicionar el botón correctamente
                    let container = imgElement.closest('.editable-image-container');
                    if (!container) {
                        container = document.createElement('div');
                        container.className = 'editable-image-container';
                        imgElement.parentNode.insertBefore(container, imgElement);
                        container.appendChild(imgElement);
                    }
                    container.appendChild(button); // Mover el botón dentro del contenedor

                    button.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        const currentSrc = imgElement.src;
                        const newSrc = prompt(`Editar URL de la imagen:`, currentSrc);
                        if (newSrc !== null && newSrc.trim() !== '') {
                            imgElement.src = newSrc.trim();
                            const storageKey = imgElement.dataset.storageKeyImg;
                            if (storageKey) {
                                localStorage.setItem(storageKey, newSrc.trim());
                                showSaveIndicator();
                                console.log(`Image ${targetId} updated to: ${newSrc.trim()}`);
                            }
                             // Reasignar onerror por si la nueva URL también falla
                            imgElement.onerror = function() {
                                console.warn(`Error loading image: ${imgElement.src}. Falling back to placeholder.`);
                                const width = imgElement.naturalWidth > 0 ? imgElement.naturalWidth : (imgElement.width || 300);
                                const height = imgElement.naturalHeight > 0 ? imgElement.naturalHeight : (imgElement.height || 200);
                                imgElement.src = `https://placehold.co/${width}x${height}/cccccc/ffffff?text=Error+al+cargar`;
                            };
                        } else if (newSrc === null) {
                             console.log("Image edit cancelled.");
                        } else {
                            alert("La URL de la imagen no puede estar vacía.");
                        }
                    });
                } else {
                     console.error(`Target image element with ID ${targetId} not found.`);
                }
            });


            // Inicializar Lucide Icons (si se usan directamente en HTML)
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }

            console.log("Editor inicializado. Elementos editables encontrados:", editableElements.length);
            console.log("Enlaces editables encontrados:", editableLinks.length);
            console.log("Imágenes editables encontradas:", editableImages.length);
        });
    </script>

</body>
</html>
